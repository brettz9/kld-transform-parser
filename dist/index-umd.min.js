!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).KldIntersections={})}(this,function(e){"use strict";function t(e,t){this.init(e,t)}function r(e){null==e&&(e=""),this.setTransformText(e)}function s(){this._lexer=new r,this._handler=null}function n(){}t.UNDEFINED=0,t.MATRIX=1,t.TRANSLATE=2,t.SCALE=3,t.ROTATE=4,t.SKEWX=5,t.SKEWY=6,t.LPAREN=7,t.RPAREN=8,t.NUMBER=9,t.EOD=10,t.prototype.init=function(e,t){this.type=e,this.text=t},t.prototype.typeis=function(e){return this.type===e},r.prototype.setTransformText=function(e){if("string"!=typeof e)throw new Error("TransformLexer.setTransformText: The first parameter must be a string");this._transformText=e},r.prototype.getNextToken=function(){for(var e=null,r=this._transformText;null===e;)if(null===r||""===r)e=new t(t.EOD,"");else if(r.match(/^([ \t\r\n,]+)/))r=r.substr(RegExp.$1.length);else if(r.match(/^(matrix)\b/))e=new t(t.MATRIX,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(translate)\b/))e=new t(t.TRANSLATE,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(scale)\b/))e=new t(t.SCALE,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(rotate)\b/))e=new t(t.ROTATE,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(skewX)\b/))e=new t(t.SKEWX,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(skewY)\b/))e=new t(t.SKEWY,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(\()/))e=new t(t.LPAREN,RegExp.$1),r=r.substr(RegExp.$1.length);else if(r.match(/^(\))/))e=new t(t.RPAREN,RegExp.$1),r=r.substr(RegExp.$1.length);else{if(!r.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new Error("TransformLexer.getNextToken: unable to tokenize text: "+r);e=new t(t.NUMBER,parseFloat(RegExp.$1)),r=r.substr(RegExp.$1.length)}return this._transformText=r,e},s.PARAMCOUNT={matrix:[6],translate:[1,2],scale:[1,2],rotate:[1,3],skewX:[1],skewY:[1]},s.METHODNAME={matrix:"matrix",translate:"translate",scale:"scale",rotate:"rotate",skewX:"skewX",skewY:"skewY"},s.prototype.parseTransform=function(e){if("string"!=typeof e)throw new Error("TransformParser.parseTransform: The first parameter must be a string");null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();var r=this._lexer;r.setTransformText(e);for(var n=r.getNextToken();!1===n.typeis(t.EOD);){var o=void 0,a=void 0,i=[];switch(n.type){case t.MATRIX:case t.TRANSLATE:case t.SCALE:case t.ROTATE:case t.SKEWX:case t.SKEWY:o=n.text,a=s.PARAMCOUNT[o],n=r.getNextToken();break;default:throw new Error("TransformParser.parseTransform: expected transform type: "+n.text)}if(n.type!==t.LPAREN)throw new Error("TransformParser.parserTransform: expected opening parenthesis: "+n.text);for(n=r.getNextToken();n!==t.EOD&&n.type===t.NUMBER;)i.push(n.text-0),n=r.getNextToken();for(var p=!1,l=i.length,f=0;f<a.length;f++)if(a[f]===l){p=!0;break}if(!1===p)throw new Error("TransformParser.parserTransform: incorrect number of arguments for "+o);if(n.type!==t.RPAREN)throw new Error("TransformParser.parserTransform: expected closing parenthesis: "+n.text);if(n=r.getNextToken(),null!==this._handler){var c=this._handler,h=s.METHODNAME[o];null!==c&&"function"==typeof c[h]&&c[h].apply(c,i)}}},s.prototype.setHandler=function(e){this._handler=e},n.prototype.show=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];console.log("".concat(e,"(").concat(r.join(","),")"))},n.prototype.matrix=function(e,t,r,s,n,o){this.show.apply(this,["matrix"].concat(Array.prototype.slice.call(arguments)))},n.prototype.translate=function(e,t){this.show.apply(this,["translate"].concat(Array.prototype.slice.call(arguments)))},n.prototype.scale=function(e,t){this.show.apply(this,["scale"].concat(Array.prototype.slice.call(arguments)))},n.prototype.rotate=function(e,t,r){this.show.apply(this,["rotate"].concat(Array.prototype.slice.call(arguments)))},n.prototype.skewX=function(e){this.show.apply(this,["skewX"].concat(Array.prototype.slice.call(arguments)))},n.prototype.skewY=function(e){this.show.apply(this,["skewY"].concat(Array.prototype.slice.call(arguments)))},e.SampleHandler=n,e.TransformLexer=r,e.TransformParser=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index-umd.min.js.map
