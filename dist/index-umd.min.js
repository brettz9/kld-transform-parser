!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).KldTransformParser={})}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var a=function(){function e(r,n){t(this,e),this.type=r,this.text=n}return n(e,[{key:"typeis",value:function(e){return this.type===e}}]),e}();a.UNDEFINED=0,a.MATRIX=1,a.TRANSLATE=2,a.SCALE=3,a.ROTATE=4,a.SKEWX=5,a.SKEWY=6,a.LPAREN=7,a.RPAREN=8,a.NUMBER=9,a.EOD=10;var s=function(){function e(r){t(this,e),null==r&&(r=""),this.setTransformText(r)}return n(e,[{key:"setTransformText",value:function(e){if("string"!=typeof e)throw new Error("TransformLexer.setTransformText: The first parameter must be a string");this._transformText=e}},{key:"getNextToken",value:function(){for(var e=null,t=this._transformText;null===e;)if(null===t||""===t)e=new a(a.EOD,"");else if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^(matrix)\b/))e=new a(a.MATRIX,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(translate)\b/))e=new a(a.TRANSLATE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(scale)\b/))e=new a(a.SCALE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(rotate)\b/))e=new a(a.ROTATE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(skewX)\b/))e=new a(a.SKEWX,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(skewY)\b/))e=new a(a.SKEWY,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(\()/))e=new a(a.LPAREN,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(\))/))e=new a(a.RPAREN,RegExp.$1),t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new Error("TransformLexer.getNextToken: unable to tokenize text: "+t);e=new a(a.NUMBER,parseFloat(RegExp.$1)),t=t.substr(RegExp.$1.length)}return this._transformText=t,e}}]),e}(),o=function(){function e(){t(this,e),this._lexer=new s,this._handler=null}return n(e,[{key:"parseTransform",value:function(t){if("string"!=typeof t)throw new Error("TransformParser.parseTransform: The first parameter must be a string");null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();var r=this._lexer;r.setTransformText(t);for(var n=r.getNextToken();!1===n.typeis(a.EOD);){var s=void 0,o=void 0,l=[];switch(n.type){case a.MATRIX:case a.TRANSLATE:case a.SCALE:case a.ROTATE:case a.SKEWX:case a.SKEWY:s=n.text,o=e.PARAMCOUNT[s],n=r.getNextToken();break;default:throw new Error("TransformParser.parseTransform: expected transform type: "+n.text)}if(n.type!==a.LPAREN)throw new Error("TransformParser.parserTransform: expected opening parenthesis: "+n.text);for(n=r.getNextToken();n!==a.EOD&&n.type===a.NUMBER;)l.push(n.text-0),n=r.getNextToken();for(var i=!1,f=l.length,c=0;c<o.length;c++)if(o[c]===f){i=!0;break}if(!1===i)throw new Error("TransformParser.parserTransform: incorrect number of arguments for "+s);if(n.type!==a.RPAREN)throw new Error("TransformParser.parserTransform: expected closing parenthesis: "+n.text);if(n=r.getNextToken(),null!==this._handler){var p=this._handler,u=e.METHODNAME[s];null!==p&&"function"==typeof p[u]&&p[u].apply(p,l)}}}},{key:"setHandler",value:function(e){this._handler=e}}]),e}();function l(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.log("".concat(e,"(").concat(r.join(","),")"))}o.PARAMCOUNT={matrix:[6],translate:[1,2],scale:[1,2],rotate:[1,3],skewX:[1],skewY:[1]},o.METHODNAME={matrix:"matrix",translate:"translate",scale:"scale",rotate:"rotate",skewX:"skewX",skewY:"skewY"};var i=function(){function e(){t(this,e)}return n(e,[{key:"matrix",value:function(e,t,r,n,a,s){l.apply(void 0,["matrix"].concat(Array.prototype.slice.call(arguments)))}},{key:"translate",value:function(e,t){l.apply(void 0,["translate"].concat(Array.prototype.slice.call(arguments)))}},{key:"scale",value:function(e,t){l.apply(void 0,["scale"].concat(Array.prototype.slice.call(arguments)))}},{key:"rotate",value:function(e,t,r){l.apply(void 0,["rotate"].concat(Array.prototype.slice.call(arguments)))}},{key:"skewX",value:function(e){l.apply(void 0,["skewX"].concat(Array.prototype.slice.call(arguments)))}},{key:"skewY",value:function(e){l.apply(void 0,["skewY"].concat(Array.prototype.slice.call(arguments)))}}]),e}();e.SampleHandler=i,e.TransformLexer=s,e.TransformParser=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index-umd.min.js.map
