function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=function(){function t(r,n){e(this,t),this.type=r,this.text=n}return r(t,[{key:"typeis",value:function(e){return this.type===e}}]),t}();n.UNDEFINED=0,n.MATRIX=1,n.TRANSLATE=2,n.SCALE=3,n.ROTATE=4,n.SKEWX=5,n.SKEWY=6,n.LPAREN=7,n.RPAREN=8,n.NUMBER=9,n.EOD=10;var a=function(){function t(r){e(this,t),null==r&&(r=""),this.setTransformText(r)}return r(t,[{key:"setTransformText",value:function(e){if("string"!=typeof e)throw new Error("TransformLexer.setTransformText: The first parameter must be a string");this._transformText=e}},{key:"getNextToken",value:function(){for(var e=null,t=this._transformText;null===e;)if(null===t||""===t)e=new n(n.EOD,"");else if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^(matrix)\b/))e=new n(n.MATRIX,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(translate)\b/))e=new n(n.TRANSLATE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(scale)\b/))e=new n(n.SCALE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(rotate)\b/))e=new n(n.ROTATE,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(skewX)\b/))e=new n(n.SKEWX,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(skewY)\b/))e=new n(n.SKEWY,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(\()/))e=new n(n.LPAREN,RegExp.$1),t=t.substr(RegExp.$1.length);else if(t.match(/^(\))/))e=new n(n.RPAREN,RegExp.$1),t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?\d+(\.\d*)?|[-+]?\.\d+)([eE][-+]?\d+)?)/))throw new Error("TransformLexer.getNextToken: unable to tokenize text: "+t);e=new n(n.NUMBER,parseFloat(RegExp.$1)),t=t.substr(RegExp.$1.length)}return this._transformText=t,e}}]),t}(),s=function(){function t(){e(this,t),this._lexer=new a,this._handler=null}return r(t,[{key:"parseTransform",value:function(e){if("string"!=typeof e)throw new Error("TransformParser.parseTransform: The first parameter must be a string");null!==this._handler&&"function"==typeof this._handler.beginParse&&this._handler.beginParse();var r=this._lexer;r.setTransformText(e);for(var a=r.getNextToken();!1===a.typeis(n.EOD);){var s=void 0,o=void 0,l=[];switch(a.type){case n.MATRIX:case n.TRANSLATE:case n.SCALE:case n.ROTATE:case n.SKEWX:case n.SKEWY:s=a.text,o=t.PARAMCOUNT[s],a=r.getNextToken();break;default:throw new Error("TransformParser.parseTransform: expected transform type: "+a.text)}if(a.type!==n.LPAREN)throw new Error("TransformParser.parserTransform: expected opening parenthesis: "+a.text);for(a=r.getNextToken();a!==n.EOD&&a.type===n.NUMBER;)l.push(a.text-0),a=r.getNextToken();for(var i=!1,c=l.length,f=0;f<o.length;f++)if(o[f]===c){i=!0;break}if(!1===i)throw new Error("TransformParser.parserTransform: incorrect number of arguments for "+s);if(a.type!==n.RPAREN)throw new Error("TransformParser.parserTransform: expected closing parenthesis: "+a.text);if(a=r.getNextToken(),null!==this._handler){var p=this._handler,u=t.METHODNAME[s];null!==p&&"function"==typeof p[u]&&p[u].apply(p,l)}}}},{key:"setHandler",value:function(e){this._handler=e}}]),t}();function o(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.log("".concat(e,"(").concat(r.join(","),")"))}s.PARAMCOUNT={matrix:[6],translate:[1,2],scale:[1,2],rotate:[1,3],skewX:[1],skewY:[1]},s.METHODNAME={matrix:"matrix",translate:"translate",scale:"scale",rotate:"rotate",skewX:"skewX",skewY:"skewY"};var l=function(){function t(){e(this,t)}return r(t,[{key:"matrix",value:function(e,t,r,n,a,s){o.apply(void 0,["matrix"].concat(Array.prototype.slice.call(arguments)))}},{key:"translate",value:function(e,t){o.apply(void 0,["translate"].concat(Array.prototype.slice.call(arguments)))}},{key:"scale",value:function(e,t){o.apply(void 0,["scale"].concat(Array.prototype.slice.call(arguments)))}},{key:"rotate",value:function(e,t,r){o.apply(void 0,["rotate"].concat(Array.prototype.slice.call(arguments)))}},{key:"skewX",value:function(e){o.apply(void 0,["skewX"].concat(Array.prototype.slice.call(arguments)))}},{key:"skewY",value:function(e){o.apply(void 0,["skewY"].concat(Array.prototype.slice.call(arguments)))}}]),t}();export{l as SampleHandler,a as TransformLexer,s as TransformParser};
//# sourceMappingURL=index-esm.min.js.map
